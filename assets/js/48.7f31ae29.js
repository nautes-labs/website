(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{325:function(e,a,s){"use strict";s.r(a);var t=s(14),r=Object(t.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"清理环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#清理环境"}},[e._v("#")]),e._v(" 清理环境")]),e._v(" "),a("p",[e._v("本文档描述了如何清理掉在"),a("RouterLink",{attrs:{to:"/guide/user-guide/run-a-pipeline.html"}},[e._v("执行流水线")]),e._v("和"),a("RouterLink",{attrs:{to:"/guide/user-guide/deploy-an-application.html"}},[e._v("部署一个应用")]),e._v("章节中创建的所有资源、数据和环境。")],1),e._v(" "),a("blockquote",[a("p",[e._v("清理过程将删除应用相关的代码库，这会导致应用的所有版本记录被清空且无法恢复。请确保待清理的环境是可以被彻底删除或已做好备份。")])]),e._v(" "),a("h2",{attrs:{id:"前提条件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前提条件"}},[e._v("#")]),e._v(" 前提条件")]),e._v(" "),a("h3",{attrs:{id:"执行流水线或部署应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行流水线或部署应用"}},[e._v("#")]),e._v(" 执行流水线或部署应用")]),e._v(" "),a("p",[e._v("请确保已经在运行时集群中成功运行过流水线或部署了一个应用。")]),e._v(" "),a("h3",{attrs:{id:"注册-gitlab-账号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注册-gitlab-账号"}},[e._v("#")]),e._v(" 注册 GitLab 账号")]),e._v(" "),a("p",[e._v("请确保您拥有 Nautes 的 GitLab 的账号，详情参考"),a("RouterLink",{attrs:{to:"/guide/user-guide/deploy-an-application.html#注册-gitlab-账号"}},[e._v("注册 GitLab 账号")]),e._v("。")],1),e._v(" "),a("h3",{attrs:{id:"导入证书"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导入证书"}},[e._v("#")]),e._v(" 导入证书")]),e._v(" "),a("p",[e._v("如果您想使用 https 协议访问 Nautes API Server，需要"),a("RouterLink",{attrs:{to:"/guide/user-guide/deploy-an-application.html#导入证书"}},[e._v("导入证书")]),e._v("。")],1),e._v(" "),a("h2",{attrs:{id:"删除运行时"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除运行时"}},[e._v("#")]),e._v(" 删除运行时")]),e._v(" "),a("p",[e._v("您需要根据在前面章节执行过的具体操作来选择删除运行时的类型。")]),e._v(" "),a("h3",{attrs:{id:"删除流水线运行时"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除流水线运行时"}},[e._v("#")]),e._v(" 删除流水线运行时")]),e._v(" "),a("p",[e._v("删除流水线运行时的相关实体，包括流水线运行时、代码库、代码库权限、环境、项目和产品。")]),e._v(" "),a("p",[e._v("将命令行程序的代码库克隆到本地。")]),e._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/nautes-labs/cli.git\n")])])]),a("p",[e._v("替换位于相对路径 "),a("code",[e._v("examples/demo-pipeline.yaml")]),e._v(" 下流水线运行时模板的变量，包括 "),a("code",[e._v("$suffix")]),e._v("，"),a("code",[e._v("$pipeline-runtime-cluster")]),e._v("。")]),e._v(" "),a("p",[e._v("替换位于相对路径 "),a("code",[e._v("examples/demo-product.yaml")]),e._v(" 下产品模板的变量，包括 "),a("code",[e._v("$suffix")]),e._v("。")]),e._v(" "),a("blockquote",[a("p",[e._v("模板的注释和示例，详情参考 "),a("RouterLink",{attrs:{to:"/guide/user-guide/deploy-an-application.html#初始化产品"}},[e._v("初始化产品")]),e._v("。")],1)]),e._v(" "),a("p",[e._v("下载 "),a("a",{attrs:{href:"https://github.com/nautes-labs/cli.git",target:"_blank",rel:"noopener noreferrer"}},[e._v("命令行工具"),a("OutboundLink")],1),e._v("，执行以下命令，以销毁产品及运行时。")]),e._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# examples/demo-product.yaml 和 examples/demo-pipeline.yaml 指在代码库中模板文件的相对路径")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# gitlab-access-token 指 GitLab access token")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# api-server-address 指 Nautes API Server 的访问地址")]),e._v("\nnautes remove "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-f")]),e._v(" examples/demo-pipeline.yaml "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$gitlab")]),e._v("-access-token "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-s")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$api")]),e._v("-server-address\nnautes remove "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-f")]),e._v(" examples/demo-product.yaml "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$gitlab")]),e._v("-access-token "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-s")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$api")]),e._v("-server-address\n")])])]),a("h3",{attrs:{id:"删除部署运行时"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除部署运行时"}},[e._v("#")]),e._v(" 删除部署运行时")]),e._v(" "),a("p",[e._v("删除部署运行时的相关实体，包括部署运行时、代码库、代码库权限、环境、项目和产品。")]),e._v(" "),a("p",[e._v("将命令行程序的代码库克隆到本地。")]),e._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/nautes-labs/cli.git\n")])])]),a("p",[e._v("替换位于相对路径 "),a("code",[e._v("examples/demo-deployment.yaml")]),e._v(" 下部署运行时模板的变量，包括 "),a("code",[e._v("$suffix")]),e._v("，"),a("code",[e._v("$deployment-runtime-cluster")]),e._v("。")]),e._v(" "),a("p",[e._v("替换位于相对路径 "),a("code",[e._v("examples/demo-product.yaml")]),e._v(" 下产品模板的变量，包括 "),a("code",[e._v("$suffix")]),e._v("。")]),e._v(" "),a("blockquote",[a("p",[e._v("模板的注释和示例，详情参考 "),a("RouterLink",{attrs:{to:"/guide/user-guide/deploy-an-application.html#初始化产品"}},[e._v("初始化产品")]),e._v("。")],1)]),e._v(" "),a("p",[e._v("下载 "),a("a",{attrs:{href:"https://github.com/nautes-labs/cli.git",target:"_blank",rel:"noopener noreferrer"}},[e._v("命令行工具"),a("OutboundLink")],1),e._v("，执行以下命令，以销毁产品及运行时。")]),e._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# examples/demo-product.yaml 和 examples/demo-deployment.yaml 指在代码库中模板文件的相对路径")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# gitlab-access-token 指 GitLab access token")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# api-server-address 指 Nautes API Server 的访问地址")]),e._v("\nnautes remove "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-f")]),e._v(" examples/demo-deployment.yaml "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$gitlab")]),e._v("-access-token "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-s")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$api")]),e._v("-server-address\nnautes remove "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-f")]),e._v(" examples/demo-product.yaml "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$gitlab")]),e._v("-access-token "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-s")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$api")]),e._v("-server-address\n")])])]),a("h2",{attrs:{id:"删除运行时集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除运行时集群"}},[e._v("#")]),e._v(" 删除运行时集群")]),e._v(" "),a("p",[e._v("请您根据所注册的运行时集群的形态和用途选择具体的删除步骤。")]),e._v(" "),a("h3",{attrs:{id:"删除物理集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除物理集群"}},[e._v("#")]),e._v(" 删除物理集群")]),e._v(" "),a("blockquote",[a("p",[e._v("请确保已成功注册物理集群。")])]),e._v(" "),a("p",[e._v("将命令行程序的代码库克隆到本地。")]),e._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/nautes-labs/cli.git\n")])])]),a("p",[e._v("替换位于相对路径 "),a("code",[e._v("examples/demo-cluster-physical-worker-pipeline.yaml")]),e._v(" 或 "),a("code",[e._v("examples/demo-cluster-physical-worker-deployment.yaml")]),e._v(" 下物理集群属性模板的变量，包括 "),a("code",[e._v("$suffix")]),e._v("、"),a("code",[e._v("$api-server")]),e._v(" 和 "),a("code",[e._v("$kubeconfig")]),e._v("。")]),e._v(" "),a("blockquote",[a("p",[e._v("物理集群属性模板的注释和示例，详情参考 "),a("RouterLink",{attrs:{to:"/guide/user-guide/deploy-an-application.html#注册物理集群"}},[e._v("注册物理集群")]),e._v("。")],1)]),e._v(" "),a("p",[e._v("下载 "),a("a",{attrs:{href:"https://github.com/nautes-labs/cli.git",target:"_blank",rel:"noopener noreferrer"}},[e._v("命令行工具"),a("OutboundLink")],1),e._v("，执行以下命令，以删除物理集群。")]),e._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("nautes remove "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-f")]),e._v(" examples/demo-cluster-physical-worker-pipeline.yaml "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$gitlab")]),e._v("-access-token "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-s")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$api")]),e._v("-server-address\n")])])]),a("p",[e._v("或")]),e._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("nautes remove "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-f")]),e._v(" examples/demo-cluster-physical-worker-deployment.yaml "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$gitlab")]),e._v("-access-token "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-s")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$api")]),e._v("-server-address\n")])])]),a("h3",{attrs:{id:"删除虚拟集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除虚拟集群"}},[e._v("#")]),e._v(" 删除虚拟集群")]),e._v(" "),a("blockquote",[a("p",[e._v("请确保已成功注册虚拟集群。")])]),e._v(" "),a("p",[e._v("将命令行程序的代码库克隆到本地。")]),e._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://github.com/nautes-labs/cli.git\n")])])]),a("p",[e._v("替换位于相对路径 "),a("code",[e._v("examples/demo-cluster-virtual-worker-pipeline.yaml")]),e._v(" 或 "),a("code",[e._v("examples/demo-cluster-virtual-worker-deployment.yaml")]),e._v(" 下的虚拟集群属性模板的变量，包括 "),a("code",[e._v("$suffix")]),e._v("、"),a("code",[e._v("$api-server")]),e._v("、"),a("code",[e._v("$host-cluster")]),e._v(" 和 "),a("code",[e._v("$api-server-port")]),e._v("。")]),e._v(" "),a("blockquote",[a("p",[e._v("虚拟集群属性模板的注释和示例，详情参考 "),a("RouterLink",{attrs:{to:"/guide/user-guide/deploy-an-application.html#注册虚拟集群"}},[e._v("注册虚拟集群")]),e._v("。")],1)]),e._v(" "),a("p",[e._v("下载 "),a("a",{attrs:{href:"https://github.com/nautes-labs/cli.git",target:"_blank",rel:"noopener noreferrer"}},[e._v("命令行工具"),a("OutboundLink")],1),e._v("，执行以下命令，将删除虚拟集群。")]),e._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("nautes remove "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-f")]),e._v(" examples/demo-cluster-virtual-worker-pipeline.yaml "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$gitlab")]),e._v("-access-token "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-s")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$api")]),e._v("-server-address\n")])])]),a("p",[e._v("或")]),e._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("nautes remove "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-f")]),e._v(" examples/demo-cluster-virtual-worker-deployment.yaml "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$gitlab")]),e._v("-access-token "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-s")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$api")]),e._v("-server-address\n")])])]),a("p",[e._v("替换位于相对路径 "),a("code",[e._v("examples/demo-cluster-host.yaml")]),e._v(" 下的宿主集群属性模板的变量，包括 "),a("code",[e._v("$suffix")]),e._v("、"),a("code",[e._v("$api-server")]),e._v(" 和 "),a("code",[e._v("$kubeconfig")]),e._v("。")]),e._v(" "),a("blockquote",[a("p",[e._v("宿主集群属性模板的注释和示例，详情参考 "),a("RouterLink",{attrs:{to:"/guide/user-guide/deploy-an-application.html#注册虚拟集群"}},[e._v("注册虚拟集群")]),e._v("。")],1)]),e._v(" "),a("p",[e._v("执行以下命令，以删除宿主集群。")]),e._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("nautes remove "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-f")]),e._v(" examples/demo-cluster-host.yaml "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$gitlab")]),e._v("-access-token "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-s")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$api")]),e._v("-server-address\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);