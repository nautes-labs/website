<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Installation | Nautes</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Kubernetes-native all-in-one Internal Developer Platform">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.3f495cb4.css" as="style"><link rel="preload" href="/assets/js/app.ff0131c0.js" as="script"><link rel="preload" href="/assets/js/2.df8adb2e.js" as="script"><link rel="preload" href="/assets/js/1.a9207883.js" as="script"><link rel="preload" href="/assets/js/58.4fab235f.js" as="script"><link rel="prefetch" href="/assets/js/10.275bec5e.js"><link rel="prefetch" href="/assets/js/11.2a97faa3.js"><link rel="prefetch" href="/assets/js/12.d154c6b8.js"><link rel="prefetch" href="/assets/js/13.3eb83a08.js"><link rel="prefetch" href="/assets/js/14.e920ff70.js"><link rel="prefetch" href="/assets/js/15.2d87bde7.js"><link rel="prefetch" href="/assets/js/16.bf574516.js"><link rel="prefetch" href="/assets/js/17.3dbcb51f.js"><link rel="prefetch" href="/assets/js/18.4c170722.js"><link rel="prefetch" href="/assets/js/19.36d507e4.js"><link rel="prefetch" href="/assets/js/20.c81c37a3.js"><link rel="prefetch" href="/assets/js/21.7f8f7869.js"><link rel="prefetch" href="/assets/js/22.3f20ce36.js"><link rel="prefetch" href="/assets/js/23.9368e570.js"><link rel="prefetch" href="/assets/js/24.3ed8e909.js"><link rel="prefetch" href="/assets/js/25.4d79c0c0.js"><link rel="prefetch" href="/assets/js/26.38bc6848.js"><link rel="prefetch" href="/assets/js/27.40cf3b2d.js"><link rel="prefetch" href="/assets/js/28.178159a6.js"><link rel="prefetch" href="/assets/js/29.ae180f88.js"><link rel="prefetch" href="/assets/js/3.f8c28e7e.js"><link rel="prefetch" href="/assets/js/30.73a4a261.js"><link rel="prefetch" href="/assets/js/31.ab0460b4.js"><link rel="prefetch" href="/assets/js/32.7ced41fc.js"><link rel="prefetch" href="/assets/js/33.6ae151ed.js"><link rel="prefetch" href="/assets/js/34.9bdb33ea.js"><link rel="prefetch" href="/assets/js/35.6626e9c7.js"><link rel="prefetch" href="/assets/js/36.942d4691.js"><link rel="prefetch" href="/assets/js/37.a5e4a0f6.js"><link rel="prefetch" href="/assets/js/38.acf616e0.js"><link rel="prefetch" href="/assets/js/39.9e15094a.js"><link rel="prefetch" href="/assets/js/4.23c74042.js"><link rel="prefetch" href="/assets/js/40.599dd475.js"><link rel="prefetch" href="/assets/js/41.ce8eda43.js"><link rel="prefetch" href="/assets/js/42.8bb1d9a4.js"><link rel="prefetch" href="/assets/js/43.e093eb73.js"><link rel="prefetch" href="/assets/js/44.bd983a52.js"><link rel="prefetch" href="/assets/js/45.c23186bf.js"><link rel="prefetch" href="/assets/js/46.f3750b1f.js"><link rel="prefetch" href="/assets/js/47.5d5387ce.js"><link rel="prefetch" href="/assets/js/48.68d42cd3.js"><link rel="prefetch" href="/assets/js/49.b30b6be8.js"><link rel="prefetch" href="/assets/js/5.71706501.js"><link rel="prefetch" href="/assets/js/50.fbe552f1.js"><link rel="prefetch" href="/assets/js/51.12e378a9.js"><link rel="prefetch" href="/assets/js/52.04518004.js"><link rel="prefetch" href="/assets/js/53.aa1b9259.js"><link rel="prefetch" href="/assets/js/54.5d49c2b1.js"><link rel="prefetch" href="/assets/js/55.4b7de0b1.js"><link rel="prefetch" href="/assets/js/56.431d9e2d.js"><link rel="prefetch" href="/assets/js/57.39161b89.js"><link rel="prefetch" href="/assets/js/59.ee6e1cec.js"><link rel="prefetch" href="/assets/js/6.6e4a3b95.js"><link rel="prefetch" href="/assets/js/60.eab1d48f.js"><link rel="prefetch" href="/assets/js/61.41917b64.js"><link rel="prefetch" href="/assets/js/62.c876c9fb.js"><link rel="prefetch" href="/assets/js/63.7b2e5a7e.js"><link rel="prefetch" href="/assets/js/64.fb6b0314.js"><link rel="prefetch" href="/assets/js/65.e30e6dfa.js"><link rel="prefetch" href="/assets/js/66.c8423942.js"><link rel="prefetch" href="/assets/js/67.63102ee1.js"><link rel="prefetch" href="/assets/js/68.f5152604.js"><link rel="prefetch" href="/assets/js/69.67f54caa.js"><link rel="prefetch" href="/assets/js/7.a06dd95d.js"><link rel="prefetch" href="/assets/js/70.a59a2f1f.js"><link rel="prefetch" href="/assets/js/71.1fa774b3.js"><link rel="prefetch" href="/assets/js/72.04463cf2.js"><link rel="prefetch" href="/assets/js/73.9f73c2af.js"><link rel="prefetch" href="/assets/js/74.25643b61.js"><link rel="prefetch" href="/assets/js/75.a6936705.js"><link rel="prefetch" href="/assets/js/76.cf075d7c.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.cf079a49.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3f495cb4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><!----> <span class="site-name">Nautes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en/guide/user-guide/introduction.html" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/en/api/introduction.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="https://github.com/nautes-labs/nautes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/guide/user-guide/installation.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/guide/user-guide/installation.html" class="nav-link">
  中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en/guide/user-guide/introduction.html" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/en/api/introduction.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="https://github.com/nautes-labs/nautes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/guide/user-guide/installation.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/guide/user-guide/installation.html" class="nav-link">
  中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/guide/user-guide/introduction.html" class="sidebar-link">Overview</a></li><li><a href="/en/guide/user-guide/installation.html" aria-current="page" class="active sidebar-link">Installation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/guide/user-guide/installation.html#prepare-the-environment" class="sidebar-link">Prepare the Environment</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/installation.html#execute-the-installation" class="sidebar-link">Execute the Installation</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/installation.html#check-the-installation-results" class="sidebar-link">Check the Installation Results</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/installation.html#destroy-the-environment" class="sidebar-link">Destroy the Environment</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/installation.html#alibaba-cloud-cost-description" class="sidebar-link">Alibaba Cloud Cost Description</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/installation.html#custom-installation" class="sidebar-link">Custom installation</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/installation.html#faq" class="sidebar-link">FAQ</a></li></ul></li><li><a href="/en/guide/user-guide/run-a-pipeline.html" class="sidebar-link">Run a Pipeline</a></li><li><a href="/en/guide/user-guide/deploy-an-application.html" class="sidebar-link">Deploy an Application</a></li><li><a href="/en/guide/user-guide/clean-environment.html" class="sidebar-link">Clean Up the Environment</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>User Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/guide/user-guide/main-process.html" class="sidebar-link">Main Process</a></li><li><a href="/en/guide/user-guide/cluster.html" class="sidebar-link">Register Runtime Cluster</a></li><li><a href="/en/guide/user-guide/product.html" class="sidebar-link">Maintain Product</a></li><li><a href="/en/guide/user-guide/project.html" class="sidebar-link">Maintain Project</a></li><li><a href="/en/guide/user-guide/code-repo.html" class="sidebar-link">Maintain Code Repository and its Authorization</a></li><li><a href="/en/guide/user-guide/environment.html" class="sidebar-link">Maintain Environment</a></li><li><a href="/en/guide/user-guide/project-pipeline-runtime.html" class="sidebar-link">Maintain Pipeline-Runtime</a></li><li><a href="/en/guide/user-guide/deployment-runtime.html" class="sidebar-link">Maintain Deployment-Runtime</a></li><li><a href="/en/guide/user-guide/deployment-results.html" class="sidebar-link">View Pipeline and Deployment Results</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h1> <p>Nautes supports installation on public cloud, private cloud, hosts, and Kubernetes clusters. This document uses Alibaba Cloud as an example to describe the process of installing Nautes on a public cloud.</p> <h2 id="prepare-the-environment"><a href="#prepare-the-environment" class="header-anchor">#</a> Prepare the Environment</h2> <ul><li>Installation machine: An AMD64 architecture Linux server, with <a href="https://docs.docker.com/engine/install/" target="_blank" rel="noopener noreferrer">Docker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, Git, and Bash pre-installed, and ensure that the <code>/opt/nautes</code> directory is not occupied.</li> <li>Public cloud access key: An access key for an Alibaba Cloud account. If you are using a RAM user, make sure the RAM user has AliyunECSFullAccess and AliyunVPCFullAccess permissions. For more information, refer to <a href="https://help.aliyun.com/document_detail/116401.html" target="_blank" rel="noopener noreferrer">Create AccessKey<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li></ul> <blockquote><p>The installer will call Alibaba Cloud's API to apply for resources, which will incur some costs (please refer to <a href="#alibaba-cloud-cost-description">Alibaba Cloud Cost Description</a>).</p> <p>Due to Alibaba Cloud's billing rules restrictions, please ensure that the Alibaba Cloud account balance is more than 100 RMB, otherwise the installation program cannot call Alibaba Cloud's API to apply for resources.</p></blockquote> <h2 id="execute-the-installation"><a href="#execute-the-installation" class="header-anchor">#</a> Execute the Installation</h2> <blockquote><p>The installer needs to retrieve relevant configurations (such as images) from GitHub. Please ensure the network connection between the installation machine and GitHub is stable.</p></blockquote> <p>Create configuration file for installer.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOT<span class="token bash punctuation"> <span class="token operator">&gt;&gt;</span> vars.yaml</span>
access_key: &lt; your alicloud access key &gt;
secret_key: &lt; your alicloud secret key &gt;
EOT</span>
</code></pre></div><p>Run the following command for default installation.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">curl</span> https://raw.githubusercontent.com/nautes-labs/installer/main/installer.sh <span class="token operator">|</span> <span class="token function">bash</span> -
</code></pre></div><p>or</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-OL</span> https://raw.githubusercontent.com/nautes-labs/installer/main/installer.sh
<span class="token function">chmod</span> +x installer.sh
./installer.sh
</code></pre></div><blockquote><p>By default, install a single-node K3s. Depending on the public network bandwidth of the installation machine, the entire installation process is expected to take 15~25 minutes. After the installation is successful, you can find the installed component information in the <code>/opt/nautes</code> directory. If the installation fails, you can troubleshoot issues through the logs in the <code>/opt/nautes/out/logs</code> directory.</p> <p>If you encounter any problems during the installation process, please refer to the <a href="#faq">FAQ</a>.</p></blockquote> <h2 id="check-the-installation-results"><a href="#check-the-installation-results" class="header-anchor">#</a> Check the Installation Results</h2> <p><code>/opt/nautes/flags</code> stores the identification files of the installation progress. The installer will skip completed installation steps according to the identification files.</p> <p><code>/opt/nautes/terraform</code> stores the terraform state file, which records the list of resources applied for by the installation program on Alibaba Cloud.</p> <p><code>/opt/nautes/out</code> stores information about the installed components:</p> <ul><li>GitLab is used to store the tenant configuration repository, user application source code, deployment manifests, pipeline configurations, etc. GitLab's administrator password and tenant configuration repository access information are stored in the <code>gitlab</code> subdirectory.</li> <li>Vault is used to store and manage tenant secret data. Vault's unseal key and root token are stored in the <code>vault</code> subdirectory.</li> <li>Kubernetes clusters are used to host all management components of the tenant. The cluster's kubeconfig is stored in the <code>kubernetes</code> subdirectory.</li> <li>ArgoCD is used to watch to the tenant configuration repository and synchronize the tenant configuration to the Kubernetes cluster according to the configuration declarations in the repository. ArgoCD's administrator password is stored in the <code>argocd</code> subdirectory.</li> <li>Dex provides a unified authentication service based on the OIDC protocol. Dex's client secret is stored in the <code>kubernetes</code> subdirectory.</li></ul> <p>In addition, related information in other subdirectories under <code>/opt/nautes/out</code>:</p> <ul><li>hosts: IP addresses and access keys of the cloud server.</li> <li>PKI: Certificates that are used to access the components and the CA that issues certificates.</li> <li>service: Access addresses for the tenant management cluster, Dex, ArgoCD, Vault, GitLab, and Nautes API Server.</li> <li>logs: Installation program logs.</li></ul> <blockquote><p>The relative path of the Nautes API Server's Swagger UI documentation is: /q/swagger-ui.</p> <p>Tenant configuration repository is used for storing configuration information related to tenant management. Each tenant has a tenant configuration repository.</p></blockquote> <h2 id="destroy-the-environment"><a href="#destroy-the-environment" class="header-anchor">#</a> Destroy the Environment</h2> <blockquote><p>Please make sure the <code>/opt/nautes directory</code> has not been deleted on the installation machine, and under the directory where the destroy command is executed, there is a configuration file for the installation program called vars.yaml.</p> <p>The uninstallation program will remove all resources applied from the cloud service, and it does not currently support uninstalling components individually.</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">curl</span> https://raw.githubusercontent.com/nautes-labs/installer/main/installer.sh <span class="token operator">|</span> <span class="token function">bash</span> <span class="token parameter variable">-s</span> destroy
</code></pre></div><p>or</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./installer.sh destroy
</code></pre></div><h2 id="alibaba-cloud-cost-description"><a href="#alibaba-cloud-cost-description" class="header-anchor">#</a> Alibaba Cloud Cost Description</h2> <p>The default specifications of the cloud server applied by the installer are as follows:</p> <ul><li>Region: China Hong Kong - Availability Zone B</li> <li>Image: Ubuntu 22.04 64-bit</li> <li>Instance Specification: ecs.c6.large (2C4G)</li> <li>System Disk: ESSD Cloud Disk PL0 40G</li> <li>Network: Public IP</li> <li>Number: 2</li> <li>Usage: K3s, Vault</li></ul> <hr> <ul><li>Region: China Hong Kong - Availability Zone B</li> <li>Image: Ubuntu 22.04 64-bit</li> <li>Instance Specification: ecs.g5.large(2C8G)</li> <li>System Disk: ESSD Cloud Disk PL0 40G</li> <li>Network: Public IP</li> <li>Number: 1</li> <li>Usage: GitLab</li></ul> <p>The installer uses the <a href="https://www.alibabacloud.com/help/en/elastic-compute-service/latest/preemptible-instances-overview" target="_blank" rel="noopener noreferrer">Preemptible Instance Mode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to create cloud servers by default, which carries the risk of instances being automatically released. If you prefer a more stable environment, please add the following configuration to vars.yaml to switch to the <a href="https://help.aliyun.com/document_detail/40653.html?spm=5176.ecsbuyv3.0.0.2a2736756P0dh1" target="_blank" rel="noopener noreferrer">Pay-As-You-Go Mode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for resources apply.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">alicloud.save_money</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</code></pre></div><p>The cost estimates for the two billing modes are as follows (excluding traffic fees):</p> <ul><li>Pay-As-You-Go: ￥ 56.1 pre Day</li> <li>Preemptible Instance: ￥ 13.5 pre Day</li></ul> <blockquote><p>The actual costs incurred may be affected by market price fluctuations, and the above estimates are for reference only.</p></blockquote> <h2 id="custom-installation"><a href="#custom-installation" class="header-anchor">#</a> Custom installation</h2> <h3 id="use-a-specified-version-of-the-installer-image"><a href="#use-a-specified-version-of-the-installer-image" class="header-anchor">#</a> Use a specified version of the installer image</h3> <p>Before installation, set the environment variable INSTALLER_VERSION.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">INSTALLER_VERSION</span><span class="token operator">=</span>vX.Y.Z
</code></pre></div><h3 id="use-a-specified-tenant-configuration-repository-template"><a href="#use-a-specified-tenant-configuration-repository-template" class="header-anchor">#</a> Use a specified tenant configuration repository template</h3> <p>Before installation, add the following configuration to the vars.yaml file.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">repos.tenant_template.url</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/nautes<span class="token punctuation">-</span>labs/tenant<span class="token punctuation">-</span>repo<span class="token punctuation">-</span>template.git
<span class="token key atrule">repos.tenant_template.version</span><span class="token punctuation">:</span> main
</code></pre></div><h3 id="use-standard-k8s"><a href="#use-standard-k8s" class="header-anchor">#</a> Use standard K8s</h3> <p>Before installation, add the following configuration to the vars.yaml file.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">deploy.kubernetes.type</span><span class="token punctuation">:</span> k8s
<span class="token key atrule">deploy.kubernetes.node_num</span><span class="token punctuation">:</span> <span class="token number">3</span>
</code></pre></div><h3 id="complete-parameter-list"><a href="#complete-parameter-list" class="header-anchor">#</a> Complete parameter list</h3> <p>Please refer to <a href="https://github.com/nautes-labs/installer/blob/main/vars.yaml.sample" target="_blank" rel="noopener noreferrer">vars.yaml.sample<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="faq"><a href="#faq" class="header-anchor">#</a> FAQ</h2> <p><strong>During the installation process of Nautes, the step [init-host : Create instance] encounters errors: code: 403, The resource is out of stock in the specified zone. How should this be resolved?</strong></p> <p>The installer defaults to using the <a href="https://www.alibabacloud.com/help/en/elastic-compute-service/latest/preemptible-instances-overview" target="_blank" rel="noopener noreferrer">Preemptible Instance Mode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to create cloud servers of specified instance types.</p> <p>If the cloud servers of the default instance types are out of stock, the above error will occur.</p> <p>Look for the instance name after <code>in resource &quot;alicloud_instance&quot;</code> in the error message, such as gitlab, kubernetes, or vault.</p> <p>To resolve this issue, according to the instance name, you can add the corresponding parameter in the <code>vars.yaml</code> file as needed to change the default instance type of the cloud server. After changing the <code>vars.yaml</code> file, you should <a href="#destroy-the-environment">destroy the environment</a>, and then <a href="#execute-the-installation">re-execute the installer</a>.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># The following parameter values are only suggested instance types.</span>
<span class="token comment"># You can change the instance type to other types with specifications not lower than the suggested instance types.</span>
<span class="token comment"># The cloud server instance type for GitLab</span>
<span class="token key atrule">gitlab_instance_type</span><span class="token punctuation">:</span> ecs.g6.large
<span class="token comment"># The cloud server instance type for Kubernetes</span>
<span class="token key atrule">kubernetes_instance_type</span><span class="token punctuation">:</span> ecs.c5.large
<span class="token comment"># The cloud server instance type for Vault</span>
<span class="token key atrule">vault_instance_type</span><span class="token punctuation">:</span> ecs.c5.large
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/en/guide/user-guide/introduction.html" class="prev">
        Overview
      </a></span> <span class="next"><a href="/en/guide/user-guide/run-a-pipeline.html">
        Run a Pipeline
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ff0131c0.js" defer></script><script src="/assets/js/2.df8adb2e.js" defer></script><script src="/assets/js/1.a9207883.js" defer></script><script src="/assets/js/58.4fab235f.js" defer></script>
  </body>
</html>
