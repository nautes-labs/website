<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Installation | Nautes</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="Kubernetes-native all-in-one Internal Developer Platform">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.c2c28341.css" as="style"><link rel="preload" href="/assets/js/app.1b0111cf.js" as="script"><link rel="preload" href="/assets/js/2.c8cb3ded.js" as="script"><link rel="preload" href="/assets/js/43.9309548b.js" as="script"><link rel="prefetch" href="/assets/js/10.503ecf77.js"><link rel="prefetch" href="/assets/js/11.34c04f28.js"><link rel="prefetch" href="/assets/js/12.4cc6c98d.js"><link rel="prefetch" href="/assets/js/13.8662aac3.js"><link rel="prefetch" href="/assets/js/14.3a1c22e7.js"><link rel="prefetch" href="/assets/js/15.1143e6d8.js"><link rel="prefetch" href="/assets/js/16.629352d0.js"><link rel="prefetch" href="/assets/js/17.efd87286.js"><link rel="prefetch" href="/assets/js/18.3b4ba7d0.js"><link rel="prefetch" href="/assets/js/19.ad59dc38.js"><link rel="prefetch" href="/assets/js/20.0804e811.js"><link rel="prefetch" href="/assets/js/21.848937d5.js"><link rel="prefetch" href="/assets/js/22.71b21d08.js"><link rel="prefetch" href="/assets/js/23.2f3bb43d.js"><link rel="prefetch" href="/assets/js/24.d7abc111.js"><link rel="prefetch" href="/assets/js/25.b01bec0b.js"><link rel="prefetch" href="/assets/js/26.633e467b.js"><link rel="prefetch" href="/assets/js/27.e7cb4a32.js"><link rel="prefetch" href="/assets/js/28.2403a008.js"><link rel="prefetch" href="/assets/js/29.8fb5ec65.js"><link rel="prefetch" href="/assets/js/3.38bf3208.js"><link rel="prefetch" href="/assets/js/30.ca80afd1.js"><link rel="prefetch" href="/assets/js/31.5f38581e.js"><link rel="prefetch" href="/assets/js/32.376dd35f.js"><link rel="prefetch" href="/assets/js/33.25ccc6c6.js"><link rel="prefetch" href="/assets/js/34.d1daf911.js"><link rel="prefetch" href="/assets/js/35.5fd181ad.js"><link rel="prefetch" href="/assets/js/36.4558e4cd.js"><link rel="prefetch" href="/assets/js/37.2af27f10.js"><link rel="prefetch" href="/assets/js/38.efff2802.js"><link rel="prefetch" href="/assets/js/39.1cd865e1.js"><link rel="prefetch" href="/assets/js/4.46a58903.js"><link rel="prefetch" href="/assets/js/40.ec22595a.js"><link rel="prefetch" href="/assets/js/41.65bc0846.js"><link rel="prefetch" href="/assets/js/42.231d3eb4.js"><link rel="prefetch" href="/assets/js/44.b424249b.js"><link rel="prefetch" href="/assets/js/45.d3a97259.js"><link rel="prefetch" href="/assets/js/46.f1a05b49.js"><link rel="prefetch" href="/assets/js/47.0bc543ed.js"><link rel="prefetch" href="/assets/js/48.730900a2.js"><link rel="prefetch" href="/assets/js/49.f1be165b.js"><link rel="prefetch" href="/assets/js/5.cc9982a8.js"><link rel="prefetch" href="/assets/js/50.c3d3c0a4.js"><link rel="prefetch" href="/assets/js/51.ad4417ef.js"><link rel="prefetch" href="/assets/js/52.d463d265.js"><link rel="prefetch" href="/assets/js/53.5c3f061a.js"><link rel="prefetch" href="/assets/js/54.1c29cff5.js"><link rel="prefetch" href="/assets/js/55.bf893811.js"><link rel="prefetch" href="/assets/js/56.61e1789c.js"><link rel="prefetch" href="/assets/js/57.d55522c6.js"><link rel="prefetch" href="/assets/js/58.16afbf3c.js"><link rel="prefetch" href="/assets/js/59.72517082.js"><link rel="prefetch" href="/assets/js/6.ef5da9c3.js"><link rel="prefetch" href="/assets/js/7.cf0a427f.js"><link rel="prefetch" href="/assets/js/8.ec408222.js"><link rel="prefetch" href="/assets/js/9.bc8f915a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c2c28341.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><!----> <span class="site-name">Nautes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en/guide/user-guide/introduction.html" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/en/api/introduction.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="https://github.com/nautes-labs/nautes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/guide/user-guide/installation.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/guide/user-guide/installation.html" class="nav-link">
  中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en/guide/user-guide/introduction.html" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/en/api/introduction.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="https://github.com/nautes-labs/nautes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/guide/user-guide/installation.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/guide/user-guide/installation.html" class="nav-link">
  中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/guide/user-guide/introduction.html" class="sidebar-link">Overview</a></li><li><a href="/en/guide/user-guide/installation.html" aria-current="page" class="active sidebar-link">Installation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/guide/user-guide/installation.html#prepare-the-environment" class="sidebar-link">Prepare the Environment</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/installation.html#execute-the-installation" class="sidebar-link">Execute the Installation</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/installation.html#check-the-installation-results" class="sidebar-link">Check the Installation Results</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/installation.html#destroy-the-environment" class="sidebar-link">Destroy the Environment</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/installation.html#alibaba-cloud-cost-description" class="sidebar-link">Alibaba Cloud Cost Description</a></li></ul></li><li><a href="/en/guide/user-guide/run-a-pipeline.html" class="sidebar-link">Run a Pipeline</a></li><li><a href="/en/guide/user-guide/deploy-an-application.html" class="sidebar-link">Deploy an Application</a></li><li><a href="/en/guide/user-guide/clean-environment.html" class="sidebar-link">Clean Up the Environment</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>User Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/guide/user-guide/main-process.html" class="sidebar-link">Main Process</a></li><li><a href="/en/guide/user-guide/cluster.html" class="sidebar-link">Register Runtime Cluster</a></li><li><a href="/en/guide/user-guide/product.html" class="sidebar-link">Maintain Product</a></li><li><a href="/en/guide/user-guide/project.html" class="sidebar-link">Maintain Project</a></li><li><a href="/en/guide/user-guide/code-repo.html" class="sidebar-link">Maintain Code Repository</a></li><li><a href="/en/guide/user-guide/environment.html" class="sidebar-link">Maintain Environment</a></li><li><a href="/en/guide/user-guide/deployment-runtime.html" class="sidebar-link">Maintain Deployment-Runtime</a></li><li><a href="/en/guide/user-guide/deployment-results.html" class="sidebar-link">View Deployment Results</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h1> <p>Nautes supports installation on public cloud, private cloud, hosts, and Kubernetes clusters. This document uses Alibaba Cloud as an example to describe the process of installing Nautes on a public cloud.</p> <h2 id="prepare-the-environment"><a href="#prepare-the-environment" class="header-anchor">#</a> Prepare the Environment</h2> <ul><li>Installation machine: An AMD64 architecture Linux server, with Docker, Git, and Bash pre-installed, and ensure that the <code>/opt/nautes</code> directory is not occupied.</li> <li>Public cloud access key: An access key for an Alibaba Cloud account. If you are using a RAM user, make sure the RAM user has AliyunECSFullAccess and AliyunVPCFullAccess permissions. For more information, refer to <a href="https://help.aliyun.com/document_detail/116401.html" target="_blank" rel="noopener noreferrer">Create AccessKey<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li></ul> <blockquote><p>The installer will call Alibaba Cloud's API to apply for resources, which will incur some costs (please refer to <a href="#alibaba-cloud-cost-description">Alibaba Cloud Cost Description</a>).</p> <p>Due to Alibaba Cloud's billing rules restrictions, please ensure that the Alibaba Cloud account balance is more than 100 RMB, otherwise the installation program cannot call Alibaba Cloud's API to apply for resources.</p></blockquote> <h2 id="execute-the-installation"><a href="#execute-the-installation" class="header-anchor">#</a> Execute the Installation</h2> <ol><li>Clone the installer project on the installation machine:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/nautes-labs/installer.git
</code></pre></div><ol start="2"><li>Write vars.yaml based on vars.yaml.sample, where access_key and secret_key must be filled in with the AccessKey of the Alibaba Cloud account, and other configurations can use default values.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOT<span class="token bash punctuation"> <span class="token operator">&gt;&gt;</span> vars.yaml</span>
access_key: &lt; your alicloud access key &gt;
secret_key: &lt; your alicloud secret key &gt;
EOT</span>
</code></pre></div><ol start="3"><li>Run the <code>start.sh</code> script to start the installation:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sh</span> start.sh
</code></pre></div><blockquote><p>Since there are many components to be installed, the entire installation process is expected to take about 40-50 minutes. After the installation is successful, you can find the installed component information in the <code>/opt/nautes</code> directory. If the installation fails, you can troubleshoot issues through the logs in the <code>/opt/nautes/out/logs</code> directory.</p></blockquote> <h2 id="check-the-installation-results"><a href="#check-the-installation-results" class="header-anchor">#</a> Check the Installation Results</h2> <p><code>/opt/nautes/management</code> is the local copy of the tenant configuration repository.</p> <p><code>/opt/nautes/terraform</code> is the terraform state file, which records the list of resources applied for by the installation program on Alibaba Cloud.</p> <p><code>/opt/nautes/out</code> stores information about the installed components:</p> <ul><li>GitLab is used to store the tenant configuration repository, user application source code, deployment manifests, pipeline configurations, etc. GitLab's administrator password and tenant configuration repository access information are stored in the <code>gitlab</code> subdirectory.</li> <li>Vault is used to store and manage tenant secret data. Vault's unseal key and root token are stored in the <code>vault</code> subdirectory.</li> <li>Kubernetes clusters are used to host all management components of the tenant. The cluster's kubeconfig is stored in the <code>kubernetes</code> subdirectory.</li> <li>ArgoCD is used to watch to the tenant configuration repository and synchronize the tenant configuration to the Kubernetes cluster according to the configuration declarations in the repository. ArgoCD's administrator password is stored in the <code>argocd</code> subdirectory.</li> <li>Dex provides a unified authentication service based on the OIDC protocol. Dex's client secret is stored in the <code>kubernetes</code> subdirectory.</li></ul> <p>In addition, related information in other subdirectories under <code>/opt/nautes/out</code>:</p> <ul><li>hosts: IP addresses and access keys of the cloud server.</li> <li>PKI: Certificates that are used to access the components and the CA that issues certificates.</li> <li>service: Access addresses for the tenant management cluster, Dex, ArgoCD, Vault, GitLab, and Nautes API Server.</li> <li>logs: Installation program logs.</li></ul> <blockquote><p>The relative path of the Nautes API Server's Swagger UI documentation is: /q/swagger-ui.</p></blockquote> <h2 id="destroy-the-environment"><a href="#destroy-the-environment" class="header-anchor">#</a> Destroy the Environment</h2> <blockquote><p>Please make sure the installation has been successfully executed and the <code>/opt/nautes directory</code> has not been deleted on the installation machine.</p> <p>The uninstallation program will remove all resources applied from the cloud service, and it does not currently support uninstalling components individually.</p></blockquote> <ol><li>Clone the installer project on the installation machine:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/nautes-labs/installer.git
</code></pre></div><ol start="2"><li><p>Modify the vars.yaml file in the project root directory, filling in the access_key and secret_key.</p></li> <li><p>Execute the <code>destroy.sh</code> script to start destroying the environment:</p></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sh</span> destroy.sh
</code></pre></div><blockquote><p>The location of the destroy environment log is : /tmp/destroy.log.</p></blockquote> <h2 id="alibaba-cloud-cost-description"><a href="#alibaba-cloud-cost-description" class="header-anchor">#</a> Alibaba Cloud Cost Description</h2> <p>The default specifications of the cloud server applied by the installer are as follows:</p> <ul><li>Region: China Hong Kong - Availability Zone B</li> <li>Image: Ubuntu 22.04 64-bit</li> <li>Instance Specification: ecs.c6.large (2C4G)</li> <li>System Disk: ESSD Cloud Disk PL0 40G</li> <li>Network: Public IP</li></ul> <p>The installer uses the <a href="https://help.aliyun.com/document_detail/52088.html?spm=5176.ecsbuyv3.0.0.2a2736756P0dh1" target="_blank" rel="noopener noreferrer">Preemptible Instance Mode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to create cloud servers by default, which carries the risk of instances being automatically released. If you prefer a more stable environment, please add the following configuration to vars.yaml to switch to the <a href="https://help.aliyun.com/document_detail/40653.html?spm=5176.ecsbuyv3.0.0.2a2736756P0dh1" target="_blank" rel="noopener noreferrer">Pay-As-You-Go Mode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for resources apply.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">alicloud</span><span class="token punctuation">:</span>
  <span class="token key atrule">save_money</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</code></pre></div><p>The cost estimates for the two billing modes are as follows (excluding traffic fees):</p> <ul><li>Pay-As-You-Go: ￥ 88.32 pre Day</li> <li>Preemptible Instance: ￥ 24 pre Day</li></ul> <blockquote><p>The actual costs incurred may be affected by market price fluctuations, and the above estimates are for reference only.</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/en/guide/user-guide/introduction.html" class="prev">
        Overview
      </a></span> <span class="next"><a href="/en/guide/user-guide/run-a-pipeline.html">
        Run a Pipeline
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1b0111cf.js" defer></script><script src="/assets/js/2.c8cb3ded.js" defer></script><script src="/assets/js/43.9309548b.js" defer></script>
  </body>
</html>
