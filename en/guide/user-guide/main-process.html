<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Main Process | Nautes</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="Kubernetes-native all-in-one Internal Developer Platform">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.c2c28341.css" as="style"><link rel="preload" href="/assets/js/app.39ebefe7.js" as="script"><link rel="preload" href="/assets/js/2.5cda13a8.js" as="script"><link rel="preload" href="/assets/js/9.568b32c0.js" as="script"><link rel="prefetch" href="/assets/js/10.954f943b.js"><link rel="prefetch" href="/assets/js/11.9cd35a8a.js"><link rel="prefetch" href="/assets/js/12.debc7c72.js"><link rel="prefetch" href="/assets/js/13.dee35591.js"><link rel="prefetch" href="/assets/js/14.2a696c45.js"><link rel="prefetch" href="/assets/js/15.e37f3143.js"><link rel="prefetch" href="/assets/js/16.69ba4994.js"><link rel="prefetch" href="/assets/js/17.e9bfa8b1.js"><link rel="prefetch" href="/assets/js/18.9fd6e6d1.js"><link rel="prefetch" href="/assets/js/19.33fa5e86.js"><link rel="prefetch" href="/assets/js/20.ef6b3a64.js"><link rel="prefetch" href="/assets/js/21.56c6e25e.js"><link rel="prefetch" href="/assets/js/22.b725bb0e.js"><link rel="prefetch" href="/assets/js/23.a8d31b0b.js"><link rel="prefetch" href="/assets/js/24.2fe6d566.js"><link rel="prefetch" href="/assets/js/25.5c1f03df.js"><link rel="prefetch" href="/assets/js/26.281e8533.js"><link rel="prefetch" href="/assets/js/27.047b717b.js"><link rel="prefetch" href="/assets/js/28.80da3970.js"><link rel="prefetch" href="/assets/js/29.26e3bf7f.js"><link rel="prefetch" href="/assets/js/3.bdfef2d9.js"><link rel="prefetch" href="/assets/js/30.cfbfb3b3.js"><link rel="prefetch" href="/assets/js/31.175771e8.js"><link rel="prefetch" href="/assets/js/32.29c08ecc.js"><link rel="prefetch" href="/assets/js/33.3c80d25d.js"><link rel="prefetch" href="/assets/js/34.0dbcbadb.js"><link rel="prefetch" href="/assets/js/35.0d4a5e3c.js"><link rel="prefetch" href="/assets/js/36.a0574e4c.js"><link rel="prefetch" href="/assets/js/37.3fe72c83.js"><link rel="prefetch" href="/assets/js/38.cccd8d80.js"><link rel="prefetch" href="/assets/js/39.f9720bdc.js"><link rel="prefetch" href="/assets/js/4.18760c5a.js"><link rel="prefetch" href="/assets/js/40.e98dad47.js"><link rel="prefetch" href="/assets/js/41.cfda4e79.js"><link rel="prefetch" href="/assets/js/42.8dd3c223.js"><link rel="prefetch" href="/assets/js/43.c3a48afd.js"><link rel="prefetch" href="/assets/js/44.682d9710.js"><link rel="prefetch" href="/assets/js/45.96e09193.js"><link rel="prefetch" href="/assets/js/46.2dadb2ac.js"><link rel="prefetch" href="/assets/js/47.adbdeadd.js"><link rel="prefetch" href="/assets/js/48.fed11ce4.js"><link rel="prefetch" href="/assets/js/49.33b480fc.js"><link rel="prefetch" href="/assets/js/5.0a76c1bf.js"><link rel="prefetch" href="/assets/js/50.12715226.js"><link rel="prefetch" href="/assets/js/51.d6a261ff.js"><link rel="prefetch" href="/assets/js/52.2c32dd2b.js"><link rel="prefetch" href="/assets/js/53.7d3db5a3.js"><link rel="prefetch" href="/assets/js/54.378deaa6.js"><link rel="prefetch" href="/assets/js/55.fc479b8e.js"><link rel="prefetch" href="/assets/js/56.b3d4010b.js"><link rel="prefetch" href="/assets/js/57.8de06c78.js"><link rel="prefetch" href="/assets/js/58.0cf26d90.js"><link rel="prefetch" href="/assets/js/59.2ea683d6.js"><link rel="prefetch" href="/assets/js/6.08b03b29.js"><link rel="prefetch" href="/assets/js/60.5faf93c2.js"><link rel="prefetch" href="/assets/js/61.d657ae56.js"><link rel="prefetch" href="/assets/js/7.57051b0f.js"><link rel="prefetch" href="/assets/js/8.d80c16bd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c2c28341.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><!----> <span class="site-name">Nautes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en/guide/user-guide/introduction.html" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/en/api/introduction.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="https://github.com/nautes-labs/nautes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/guide/user-guide/main-process.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/guide/user-guide/main-process.html" class="nav-link">
  中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en/guide/user-guide/introduction.html" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/en/api/introduction.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="https://github.com/nautes-labs/nautes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/guide/user-guide/main-process.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/guide/user-guide/main-process.html" class="nav-link">
  中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/guide/user-guide/introduction.html" class="sidebar-link">Overview</a></li><li><a href="/en/guide/user-guide/installation.html" class="sidebar-link">Installation</a></li><li><a href="/en/guide/user-guide/run-a-pipeline.html" class="sidebar-link">Run a Pipeline</a></li><li><a href="/en/guide/user-guide/deploy-an-application.html" class="sidebar-link">Deploy an Application</a></li><li><a href="/en/guide/user-guide/clean-environment.html" class="sidebar-link">Clean Up the Environment</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>User Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/guide/user-guide/main-process.html" aria-current="page" class="active sidebar-link">Main Process</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/guide/user-guide/main-process.html#installation" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/main-process.html#register-runtime-cluster" class="sidebar-link">Register Runtime Cluster</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/main-process.html#initialize-a-product" class="sidebar-link">Initialize a Product</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/main-process.html#run-pipelines" class="sidebar-link">Run Pipelines</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/main-process.html#view-pipeline-results" class="sidebar-link">View Pipeline Results</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/main-process.html#deployment" class="sidebar-link">Deployment</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/main-process.html#view-deployment-results" class="sidebar-link">View Deployment Results</a></li></ul></li><li><a href="/en/guide/user-guide/cluster.html" class="sidebar-link">Register Runtime Cluster</a></li><li><a href="/en/guide/user-guide/product.html" class="sidebar-link">Maintain Product</a></li><li><a href="/en/guide/user-guide/project.html" class="sidebar-link">Maintain Project</a></li><li><a href="/en/guide/user-guide/code-repo.html" class="sidebar-link">Maintain Code Repository and its Authorization</a></li><li><a href="/en/guide/user-guide/environment.html" class="sidebar-link">Maintain Environment</a></li><li><a href="/en/guide/user-guide/project-pipeline-runtime.html" class="sidebar-link">Maintain Pipeline-Runtime</a></li><li><a href="/en/guide/user-guide/deployment-runtime.html" class="sidebar-link">Maintain Deployment-Runtime</a></li><li><a href="/en/guide/user-guide/deployment-results.html" class="sidebar-link">View Pipeline and Deployment Results</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="main-process"><a href="#main-process" class="header-anchor">#</a> Main Process</h1> <p>This document describes the main process of deploying an application, including the following steps:</p> <p><a href="#installation">Installation</a></p> <p><a href="#register-runtime-cluster">Register Runtime Cluster</a></p> <p><a href="#initialize-a-product">Initialize a Product</a></p> <p><a href="#run-pipelines">Run Pipelines</a></p> <p><a href="#view-pipeline-results">View Pipeline Results</a></p> <p><a href="#deployment">Deployment</a></p> <p><a href="#view-deployment-results">View Deployment Results</a></p> <p>The main process is shown in the following diagram:</p> <p><img src="/assets/img/user-guide-overview-1.3c3ef50a.png" alt="directive syntax graph"></p> <p>In Nautes, a tenant management cluster and runtime clusters are indispensable components. Each tenant has only one tenant management cluster, which is responsible for initializing all runtime clusters for the tenant and coordinating various components to integrate and deploy using the runtime cluster. Each tenant has only one Git-based configuration repository, and the tenant management cluster updates its components and resources automatically by watching the tenant configuration repository.</p> <p>Each tenant can have multiple runtime clusters, which serve as the actual infrastructures for hosting IT system integration and running. These clusters can be either virtual or physical.</p> <p>The environment refers to the collection of all infrastructure, software, and configurations that support the operation of IT systems at specific stages (such as development, testing, production, etc.). The runtime cluster can provide the computing power required by the environment. Therefore, it is necessary to relate the environment to the runtime cluster so that IT systems can use corresponding runtime clusters according to different stages.</p> <p>In Nautes, for IT systems adopting a microservices architecture, a &quot;Product&quot; refers to an IT system, while a &quot;Project&quot; refers to a microservice. Therefore, each product contains multiple projects, and each project has its own code repositories.</p> <p>When a product reaches a certain stage and needs to be integrated, tested, or to provide business functionality to the end users, the product team can use a declarative method to describe the expected state of the product in different environments.</p> <p>When a product is ready for integration or testing, the product team can use the specified pipeline runtime clusters for integration and testing by defining the pipeline runtimes. Each project can have one or multiple exclusive pipeline runtimes, for example, code from different branches of a code repository can be integrated through different pipeline runtimes, while multiple pipeline runtimes can be hosted on the same cluster.</p> <p>When a product is ready for deployment, the product team can deploy the product using the specified deployment runtime clusters by defining the deployment runtimes. Each product can have multiple deployment runtimes, for example, you can manage functional testing and customer demonstration environments through two deployment runtimes in a product, while the deployment runtimes for multiple products can be hosted on the same cluster.</p> <p>Nautes uses Kubernetes manifests to define environments, projects, code repositories, authorizations, pipeline runtimes, deployment runtimes and stores these manifests in a product configuration repository, collectively referred to as the &quot;product configuration manifest&quot;. Nautes synchronizes the pipeline or deployment runtime to the runtime cluster by watching changes in the product configuration manifest.</p> <p>When users push code to the code repository declared in the pipeline runtime, Nautes will watch the webhook callbacks from the code repository and trigger a pipeline in the cluster declared in the pipeline runtime.</p> <p>When users push Kubernetes manifests to the code repository declared in the deployment runtime, Nautes watches for changes in the Kubernetes manifests and synchronizes to the deployment runtime cluster until the actual state in the deployment runtime cluster is consistent with the expected state in the code repository.</p> <p>To prevent the leakage of sensitive information, it is managed by Vault in Nautes.</p> <h2 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h2> <p>For more information, please refer to <a href="/en/guide/user-guide/installation.html">Installation</a>.</p> <h2 id="register-runtime-cluster"><a href="#register-runtime-cluster" class="header-anchor">#</a> Register Runtime Cluster</h2> <p>You can register runtime clusters through the Command-Line or API.</p> <p>If you choose to use the command-line, please refer to <a href="/en/guide/user-guide/run-a-pipeline.html#register-runtime-cluster">Register Pipeline Runtime Cluster</a> or <a href="/en/guide/user-guide/deploy-an-application.html#register-runtime-cluster">Register Deployment Runtime Cluster</a> according to the type of runtime cluster you want to register.</p> <p>If you choose to use the API, please refer to <a href="/en/guide/user-guide/cluster.html">API</a>.</p> <h2 id="initialize-a-product"><a href="#initialize-a-product" class="header-anchor">#</a> Initialize a Product</h2> <p>Submitting product configuration manifests supports both Command-Line and API. For more information about the API, please refer to the <a href="/en/guide/user-guide/product.html">Maintain Product</a>, <a href="/en/guide/user-guide/project.html">Maintain Project</a>, <a href="/en/guide/user-guide/code-repo.html">Maintain Code Repository</a>, <a href="/en/guide/user-guide/environment.html">Maintain Environment</a>, <a href="/en/guide/user-guide/pipeline-runtime.html">Maintain Pipeline Runtime</a>, and <a href="/en/guide/user-guide/deployment-runtime.html">Maintain Deployment Runtime</a> sections. For more information about the command-line, please refer to <a href="/en/guide/user-guide/run-a-pipeline.html#initialize-a-product">Pipeline</a> or <a href="/en/guide/user-guide/deploy-an-application.html#initialize-a-product">Deployment</a>.</p> <p>When submitting product configuration manifests via the command-line, it sorts the contents of the manifest before executing. The order for adding is: creating products, creating environments, creating projects, creating code repositories, creating authorizations, creating pipeline runtimes, and creating deployment runtimes. The order for destroying is: deleting the deployment runtimes, deleting the pipeline runtimes, deleting the authorizations, deleting the code repositories, deleting the projects, deleting the environments, and deleting the products.</p> <p>After the product is created successfully, a group with the same name as the product will be created in GitLab, and a repository named <code>default.project</code> will be created in this group to store the product configuration manifests, including resource files for environments, projects, code repositories, authorizations, pipeline runtimes and deployment runtimes. Each group has only single <code>default.project</code> repository.</p> <p>Nautes will automatically install related resources in the corresponding runtime cluster according to the product configuration manifests, enabling the pipeline runtime cluster to have the ability to watch webhook callbacks from GitLab and trigger the pipeline, as well as enabling the deployment runtime cluster to have the ability to watch the GitLab repository of the product and automatic deployment.</p> <blockquote><p>In order to ensure that Nautes can automatically synchronize the runtimes of the product based on the product configuration manifests, the product configuration manifests must conform to the predefined rules. Therefore, when submitting a request, the Nautes API Server will perform validation on the product configuration manifests by default. If the validation fails, the request will be rejected.</p> <p>In certain scenarios, users may need to submit resource files failing to conform to the predefined rules, and subsequently submit the related resources later. In order to satisfy similar scenarios, you can force the submission of requests by adding the query parameter 'insecure_skip_check=true' to the API of POST and DELETE types.</p></blockquote> <h2 id="run-pipelines"><a href="#run-pipelines" class="header-anchor">#</a> Run Pipelines</h2> <p>Use Git CLI to submit source code and pipeline configuration files to a project source code repository. After a successful submission, the pipeline will be triggered in the specified pipeline runtime cluster. For more information, please refer to <a href="/en/guide/user-guide/run-a-pipeline.html#run-pipelines">Run Pipelines</a></p> <h2 id="view-pipeline-results"><a href="#view-pipeline-results" class="header-anchor">#</a> View Pipeline Results</h2> <p>You can view the execution results of the pipeline through Tekton Dashboard, GitLab console, and image repository console. For more information, please refer to <a href="/en/guide/user-guide/pipeline-results.html">View Pipeline Results</a>.</p> <h2 id="deployment"><a href="#deployment" class="header-anchor">#</a> Deployment</h2> <p>After automatically updating (or manually updating using Git CLI) the Kubernetes manifests in the deployment configuration repository, Kubernetes manifests will be deployed to the specified deployment runtime cluster. For more information, please refer to <a href="/en/guide/user-guide/deploy-an-application.html#deployment">Deployment</a>.</p> <h2 id="view-deployment-results"><a href="#view-deployment-results" class="header-anchor">#</a> View Deployment Results</h2> <p>Through the ArgoCD console or the kubectl command-line, you will be able to view the deployment results of the product and manage resources related to authorized products only. For more information, please refer to <a href="/en/guide/user-guide/deployment-results.html">View Deployment Results</a>.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/en/guide/user-guide/clean-environment.html" class="prev">
        Clean Up the Environment
      </a></span> <span class="next"><a href="/en/guide/user-guide/cluster.html">
        Register Runtime Cluster
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.39ebefe7.js" defer></script><script src="/assets/js/2.5cda13a8.js" defer></script><script src="/assets/js/9.568b32c0.js" defer></script>
  </body>
</html>
