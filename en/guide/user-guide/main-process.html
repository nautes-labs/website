<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Main Process | Nautes</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="Kubernetes-native all-in-one Internal Developer Platform">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.c2c28341.css" as="style"><link rel="preload" href="/assets/js/app.4e1e3dc6.js" as="script"><link rel="preload" href="/assets/js/2.c8cb3ded.js" as="script"><link rel="preload" href="/assets/js/9.04be6328.js" as="script"><link rel="prefetch" href="/assets/js/10.8ce840ab.js"><link rel="prefetch" href="/assets/js/11.b287e80e.js"><link rel="prefetch" href="/assets/js/12.4cc6c98d.js"><link rel="prefetch" href="/assets/js/13.8662aac3.js"><link rel="prefetch" href="/assets/js/14.d642ecbb.js"><link rel="prefetch" href="/assets/js/15.1143e6d8.js"><link rel="prefetch" href="/assets/js/16.629352d0.js"><link rel="prefetch" href="/assets/js/17.f9ef7035.js"><link rel="prefetch" href="/assets/js/18.12723770.js"><link rel="prefetch" href="/assets/js/19.ea79f4cb.js"><link rel="prefetch" href="/assets/js/20.2a4a0905.js"><link rel="prefetch" href="/assets/js/21.848937d5.js"><link rel="prefetch" href="/assets/js/22.ed7481cf.js"><link rel="prefetch" href="/assets/js/23.dd959c8e.js"><link rel="prefetch" href="/assets/js/24.b76a5f55.js"><link rel="prefetch" href="/assets/js/25.fa8433ae.js"><link rel="prefetch" href="/assets/js/26.f2afd052.js"><link rel="prefetch" href="/assets/js/27.8c07a61b.js"><link rel="prefetch" href="/assets/js/28.2403a008.js"><link rel="prefetch" href="/assets/js/29.8fb5ec65.js"><link rel="prefetch" href="/assets/js/3.d5e7ad9f.js"><link rel="prefetch" href="/assets/js/30.ca80afd1.js"><link rel="prefetch" href="/assets/js/31.5f38581e.js"><link rel="prefetch" href="/assets/js/32.376dd35f.js"><link rel="prefetch" href="/assets/js/33.25ccc6c6.js"><link rel="prefetch" href="/assets/js/34.23026096.js"><link rel="prefetch" href="/assets/js/35.5fd181ad.js"><link rel="prefetch" href="/assets/js/36.4558e4cd.js"><link rel="prefetch" href="/assets/js/37.dd5e3acd.js"><link rel="prefetch" href="/assets/js/38.71574f4b.js"><link rel="prefetch" href="/assets/js/39.97790a67.js"><link rel="prefetch" href="/assets/js/4.46a58903.js"><link rel="prefetch" href="/assets/js/40.b8a4ec44.js"><link rel="prefetch" href="/assets/js/41.863ba614.js"><link rel="prefetch" href="/assets/js/42.0b8b5473.js"><link rel="prefetch" href="/assets/js/43.82ada674.js"><link rel="prefetch" href="/assets/js/44.b744ddf4.js"><link rel="prefetch" href="/assets/js/45.0019478e.js"><link rel="prefetch" href="/assets/js/46.7311edcb.js"><link rel="prefetch" href="/assets/js/47.7995c2e4.js"><link rel="prefetch" href="/assets/js/48.a3c41cb0.js"><link rel="prefetch" href="/assets/js/49.1755c680.js"><link rel="prefetch" href="/assets/js/5.cc9982a8.js"><link rel="prefetch" href="/assets/js/50.ba79acb6.js"><link rel="prefetch" href="/assets/js/51.e895be48.js"><link rel="prefetch" href="/assets/js/52.7031e9e6.js"><link rel="prefetch" href="/assets/js/53.9f4d2122.js"><link rel="prefetch" href="/assets/js/54.e36340d6.js"><link rel="prefetch" href="/assets/js/55.de2d40cd.js"><link rel="prefetch" href="/assets/js/56.50b18b56.js"><link rel="prefetch" href="/assets/js/57.91f9128a.js"><link rel="prefetch" href="/assets/js/6.715e2124.js"><link rel="prefetch" href="/assets/js/7.9caf09a1.js"><link rel="prefetch" href="/assets/js/8.45f4ca87.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c2c28341.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><!----> <span class="site-name">Nautes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en/guide/user-guide/introduction.html" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/en/api/introduction.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="https://github.com/nautes-labs/nautes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/guide/user-guide/main-process.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/guide/user-guide/main-process.html" class="nav-link">
  中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en/guide/user-guide/introduction.html" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/en/api/introduction.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="https://github.com/nautes-labs/nautes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/guide/user-guide/main-process.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/guide/user-guide/main-process.html" class="nav-link">
  中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/guide/user-guide/introduction.html" class="sidebar-link">Overview</a></li><li><a href="/en/guide/user-guide/installation.html" class="sidebar-link">Installation</a></li><li><a href="/en/guide/user-guide/deploy-an-application.html" class="sidebar-link">Deploy an Application</a></li><li><a href="/en/guide/user-guide/clean-environment.html" class="sidebar-link">Clean Up the Environment</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>User Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/guide/user-guide/main-process.html" aria-current="page" class="active sidebar-link">Main Process</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/guide/user-guide/main-process.html#installation" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/main-process.html#register-runtime-cluster" class="sidebar-link">Register Runtime Cluster</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/main-process.html#prepare-runtime-environment" class="sidebar-link">Prepare Runtime Environment</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/main-process.html#deployment" class="sidebar-link">Deployment</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/main-process.html#view-deployment-results" class="sidebar-link">View Deployment Results</a></li></ul></li><li><a href="/en/guide/user-guide/cluster.html" class="sidebar-link">Register Runtime Cluster</a></li><li><a href="/en/guide/user-guide/product.html" class="sidebar-link">Maintain Product</a></li><li><a href="/en/guide/user-guide/project.html" class="sidebar-link">Maintain Project</a></li><li><a href="/en/guide/user-guide/code-repo.html" class="sidebar-link">Maintain Code Repository</a></li><li><a href="/en/guide/user-guide/environment.html" class="sidebar-link">Maintain Environment</a></li><li><a href="/en/guide/user-guide/deployment-runtime.html" class="sidebar-link">Maintain Deployment-Runtime</a></li><li><a href="/en/guide/user-guide/deployment-results.html" class="sidebar-link">View Deployment Results</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="main-process"><a href="#main-process" class="header-anchor">#</a> Main Process</h1> <p>This document describes the main process of deploying an application, including the following steps:<br> <a href="#installation">Installation</a><br> <a href="#register-runtime-cluster">Register Runtime Cluster</a><br> <a href="#prepare-runtime-environment">Prepare Runtime Environment</a><br> <a href="#deployment">Deployment</a><br> <a href="#view-deployment-results">View Deployment Results</a></p> <p>The main process is shown in the following diagram:</p> <p><img src="/assets/img/user-guide-overview-1.97a6d023.png" alt="directive syntax graph"></p> <p>In Nautes, a tenant management cluster and deployment runtime clusters are essential components. Each tenant has only one tenant management cluster, which is responsible for initializing all deployment runtime clusters for the tenant and coordinating various components to implement automated deployment to deployment runtime clusters. Each tenant has only one tenant configuration repository stored in GitLab, and the tenant management cluster updates its components and resources automatically by watching the tenant configuration repository.</p> <p>Each tenant can have multiple deployment runtime clusters, which serve as the actual infrastructures for hosting IT system runtime environments. These clusters can be either virtual or physical.</p> <p>Different stages of the IT system lifecycle require corresponding environments, such as: development, testing, pre-production, and production environments.
Environments need to run on deployment runtime clusters, and it is essential to relate the environment to the deployment runtime cluster to ensure that the IT system is deployed to the correct runtime environment.</p> <p>In Nautes, for IT systems adopting a microservices architecture, a &quot;Product&quot; refers to an IT system, while a &quot;Project&quot; refers to a microservice. Therefore, each Product contains multiple Projects, each with its own independent code repository.</p> <p>When a product is ready for testing or utilization, it is typically deployed to the deployment runtime cluster related to the corresponding environment based on the deployment configuration, resulting in a deployment runtime environment. Each product can have multiple deployment runtime environments, such as functional testing or customer demonstration environments created in different clusters with the same deployment configuration. Additionally, multiple products' deployment runtime environments can be hosted on the same cluster.</p> <p>Nautes uses Kubernetes resource files to define environments, projects, code repositories, and deployment runtimes and stores these resource files in the product's GitLab repository, collectively referred to as the &quot;product configuration manifest.&quot; Nautes watches the product configuration manifest and implements automated deployment to the deployment runtime cluster, creating or updating the product's deployment runtime environment.</p> <p>When users submit Kubernetes Manifests to the GitLab repository watched by the deployment runtime cluster, the product's deployment runtime environment watches the Kubernetes Manifests and implements automated deployment to the deployment runtime cluster until the actual state in the deployment runtime cluster is consistent with the expected state in the GitLab repository.</p> <p>In order to prevent sensitive information from being leaked, sensitive information is managed by Vault in Nautes.</p> <h2 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h2> <p>For more information, refer to the <a href="/en/guide/user-guide/installation.html">Installation</a>.</p> <h2 id="register-runtime-cluster"><a href="#register-runtime-cluster" class="header-anchor">#</a> Register Runtime Cluster</h2> <p>Support both <a href="/en/guide/user-guide/deploy-an-application.html#register-runtime-cluster">Command Line</a>  and  <a href="/en/guide/user-guide/cluster.html">API</a> for registering runtime clusters.</p> <h2 id="prepare-runtime-environment"><a href="#prepare-runtime-environment" class="header-anchor">#</a> Prepare Runtime Environment</h2> <p>Submitting product configuration manifests supports both <a href="/en/guide/user-guide/deploy-an-application.html#prepare-runtime-environment">Command Line</a> and API methods. For more information about the API interfaces, refer to the <a href="/en/guide/user-guide/product.html">Maintain Product</a>, <a href="/en/guide/user-guide/project.html">Maintain Project</a>,<a href="/en/guide/user-guide/code-repo.html">Maintain Code Repository</a>, <a href="/en/guide/user-guide/environment.html">Maintain Environment</a>, and <a href="/en/guide/user-guide/deployment-runtime.html">Maintain Deployment Runtime</a> sections.</p> <p>There is an order for submitting product configuration manifests. The forward order for adding is: create a product, create an environment, create a project, create a repository, and create a deployment runtime. The reverse order for destroying is: delete deployment runtime, delete code repository, delete project, delete environment, and delete product.</p> <p>After the product is created successfully, a group with the same name as the product will be created in GitLab, and a repository named <code>default.project</code> will be created in this group to store the product configuration manifest , including resource files for environments, projects, repositories, and deployment runtimes. Each group has only one <code>default.project</code> repository.</p> <p>After the product configuration manifest is created successfully, relevant resources will be automatically installed in the deployment runtime cluster according to the product configuration manifest, enabling the deployment runtime cluster to watch the GitLab repository of the product and automatically deploy to the cluster.</p> <blockquote><p>In order to ensure that Nautes can automatically deploy the runtime environment of a product based on the product configuration manifest, the product configuration manifest must conform to the predefined rules. Therefore, validation of the product configuration manifest is enabled by default when submitting a request, and the request cannot be submitted if the validation fails.</p> <p>In certain scenarios, users may need to submit resource files failing to conform to the predefined rules, and subsequently submit the related resources later. In order to satisfy similar scenarios, the POST and DELETE types of API requests can be forced to submit or delete resource files by adding the <code>insecure_skip_check</code> query parameter and setting its value to <code>true</code>.</p></blockquote> <h2 id="deployment"><a href="#deployment" class="header-anchor">#</a> Deployment</h2> <p>Use the Git CLI to submit Kubernetes Manifests to the product's GitLab repository, such as deployment, service, etc. After successful submission , the product will be deployed to the specified deployment runtime cluster. For more information, refer to <a href="/en/guide/user-guide/deploy-an-application.html#deployment">Deployment</a>.</p> <h2 id="view-deployment-results"><a href="#view-deployment-results" class="header-anchor">#</a> View Deployment Results</h2> <p>Through the ArgoCD console or the kubectl command-line tool, you will be able to view the deployment results of the product and manage resources related to authorized products only.  For more information, refer to <a href="/en/guide/user-guide/deployment-results.html">View Deployment Results</a>.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/en/guide/user-guide/clean-environment.html" class="prev">
        Clean Up the Environment
      </a></span> <span class="next"><a href="/en/guide/user-guide/cluster.html">
        Register Runtime Cluster
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4e1e3dc6.js" defer></script><script src="/assets/js/2.c8cb3ded.js" defer></script><script src="/assets/js/9.04be6328.js" defer></script>
  </body>
</html>
