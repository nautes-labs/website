<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Maintain Deployment-Runtime | Nautes</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="Kubernetes-native all-in-one Internal Developer Platform">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.c2c28341.css" as="style"><link rel="preload" href="/assets/js/app.a878d1f5.js" as="script"><link rel="preload" href="/assets/js/2.c8cb3ded.js" as="script"><link rel="preload" href="/assets/js/83.f9b57cc0.js" as="script"><link rel="prefetch" href="/assets/js/10.0ce5c295.js"><link rel="prefetch" href="/assets/js/11.b9b81cd6.js"><link rel="prefetch" href="/assets/js/12.4cc6c98d.js"><link rel="prefetch" href="/assets/js/13.8662aac3.js"><link rel="prefetch" href="/assets/js/14.7322517b.js"><link rel="prefetch" href="/assets/js/15.1143e6d8.js"><link rel="prefetch" href="/assets/js/16.91ebbf8d.js"><link rel="prefetch" href="/assets/js/17.96fe6784.js"><link rel="prefetch" href="/assets/js/18.257cd108.js"><link rel="prefetch" href="/assets/js/19.9ed454a6.js"><link rel="prefetch" href="/assets/js/20.15150f19.js"><link rel="prefetch" href="/assets/js/21.7df707ac.js"><link rel="prefetch" href="/assets/js/22.f3e5947a.js"><link rel="prefetch" href="/assets/js/23.c4da4153.js"><link rel="prefetch" href="/assets/js/24.a9199495.js"><link rel="prefetch" href="/assets/js/25.09387942.js"><link rel="prefetch" href="/assets/js/26.e206db59.js"><link rel="prefetch" href="/assets/js/27.19e01a65.js"><link rel="prefetch" href="/assets/js/28.dd4530f9.js"><link rel="prefetch" href="/assets/js/29.b70794c7.js"><link rel="prefetch" href="/assets/js/3.2525ab59.js"><link rel="prefetch" href="/assets/js/30.48ef4193.js"><link rel="prefetch" href="/assets/js/31.3d04f1d9.js"><link rel="prefetch" href="/assets/js/32.77125e82.js"><link rel="prefetch" href="/assets/js/33.90b4d581.js"><link rel="prefetch" href="/assets/js/34.89d6c52f.js"><link rel="prefetch" href="/assets/js/35.af3d39fd.js"><link rel="prefetch" href="/assets/js/36.85575237.js"><link rel="prefetch" href="/assets/js/37.414a8367.js"><link rel="prefetch" href="/assets/js/38.2ca3fa22.js"><link rel="prefetch" href="/assets/js/39.98eb785b.js"><link rel="prefetch" href="/assets/js/4.46a58903.js"><link rel="prefetch" href="/assets/js/40.15937ed7.js"><link rel="prefetch" href="/assets/js/41.d302a2b8.js"><link rel="prefetch" href="/assets/js/42.1c3b7c8f.js"><link rel="prefetch" href="/assets/js/43.28a3fb0d.js"><link rel="prefetch" href="/assets/js/44.a84835e7.js"><link rel="prefetch" href="/assets/js/45.fc6a1cfe.js"><link rel="prefetch" href="/assets/js/46.5dfbcf5f.js"><link rel="prefetch" href="/assets/js/47.a6cefd7d.js"><link rel="prefetch" href="/assets/js/48.f4192058.js"><link rel="prefetch" href="/assets/js/49.0fd73d71.js"><link rel="prefetch" href="/assets/js/5.cc9982a8.js"><link rel="prefetch" href="/assets/js/50.0a8d1d54.js"><link rel="prefetch" href="/assets/js/51.144d02fd.js"><link rel="prefetch" href="/assets/js/52.098adb53.js"><link rel="prefetch" href="/assets/js/53.a852f886.js"><link rel="prefetch" href="/assets/js/54.8281787c.js"><link rel="prefetch" href="/assets/js/55.02fe5bdd.js"><link rel="prefetch" href="/assets/js/56.e4a6cc28.js"><link rel="prefetch" href="/assets/js/57.b421b928.js"><link rel="prefetch" href="/assets/js/58.f7172025.js"><link rel="prefetch" href="/assets/js/59.49672b66.js"><link rel="prefetch" href="/assets/js/6.284167cd.js"><link rel="prefetch" href="/assets/js/60.80cc9b7b.js"><link rel="prefetch" href="/assets/js/61.a1878a66.js"><link rel="prefetch" href="/assets/js/62.2f9b624a.js"><link rel="prefetch" href="/assets/js/63.69938e76.js"><link rel="prefetch" href="/assets/js/64.bc6887ad.js"><link rel="prefetch" href="/assets/js/65.2fdc58b7.js"><link rel="prefetch" href="/assets/js/66.3722810c.js"><link rel="prefetch" href="/assets/js/67.805c2ba8.js"><link rel="prefetch" href="/assets/js/68.f5628ecf.js"><link rel="prefetch" href="/assets/js/69.b2810a94.js"><link rel="prefetch" href="/assets/js/7.cf778bfa.js"><link rel="prefetch" href="/assets/js/70.0c0027b1.js"><link rel="prefetch" href="/assets/js/71.a2e386f0.js"><link rel="prefetch" href="/assets/js/72.2599812e.js"><link rel="prefetch" href="/assets/js/73.ce8d7665.js"><link rel="prefetch" href="/assets/js/74.d7a4147b.js"><link rel="prefetch" href="/assets/js/75.1f8677e9.js"><link rel="prefetch" href="/assets/js/76.29eaabfa.js"><link rel="prefetch" href="/assets/js/77.73e528ca.js"><link rel="prefetch" href="/assets/js/78.abfa23a9.js"><link rel="prefetch" href="/assets/js/79.f898364a.js"><link rel="prefetch" href="/assets/js/8.a4b172c1.js"><link rel="prefetch" href="/assets/js/80.15c60e0b.js"><link rel="prefetch" href="/assets/js/81.d8a07d3c.js"><link rel="prefetch" href="/assets/js/82.0de95492.js"><link rel="prefetch" href="/assets/js/84.32a102ef.js"><link rel="prefetch" href="/assets/js/85.ac4a4131.js"><link rel="prefetch" href="/assets/js/86.82609869.js"><link rel="prefetch" href="/assets/js/87.ec849d68.js"><link rel="prefetch" href="/assets/js/88.2dcda121.js"><link rel="prefetch" href="/assets/js/89.be78ef90.js"><link rel="prefetch" href="/assets/js/9.337dd0fd.js"><link rel="prefetch" href="/assets/js/90.84f8aee4.js"><link rel="prefetch" href="/assets/js/91.ecf59a6f.js"><link rel="prefetch" href="/assets/js/92.c95a2f7b.js"><link rel="prefetch" href="/assets/js/93.128278d0.js"><link rel="prefetch" href="/assets/js/94.69a32e68.js"><link rel="prefetch" href="/assets/js/95.21f5f0a8.js"><link rel="prefetch" href="/assets/js/96.49269a5a.js"><link rel="prefetch" href="/assets/js/97.7a45f34a.js"><link rel="prefetch" href="/assets/js/98.c8379820.js"><link rel="prefetch" href="/assets/js/99.b5aa75db.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c2c28341.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><!----> <span class="site-name">Nautes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en/guide/user-guide/introduction.html" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/en/api/" class="nav-link">
  API
</a></div><div class="nav-item"><a href="https://github.com/nautes-labs/nautes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/guide/user-guide/deployment-runtime.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/guide/user-guide/deployment-runtime.html" class="nav-link">
  中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en/guide/user-guide/introduction.html" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/en/api/" class="nav-link">
  API
</a></div><div class="nav-item"><a href="https://github.com/nautes-labs/nautes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/guide/user-guide/deployment-runtime.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/guide/user-guide/deployment-runtime.html" class="nav-link">
  中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/guide/user-guide/introduction.html" class="sidebar-link">Overview</a></li><li><a href="/en/guide/user-guide/installation.html" class="sidebar-link">Installation</a></li><li><a href="/en/guide/user-guide/deploy-an-application.html" class="sidebar-link">Deploy an Application</a></li><li><a href="/en/guide/user-guide/clean-environment.html" class="sidebar-link">Clean Up the Environment</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>User Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/guide/user-guide/main-process.html" class="sidebar-link">Main Process</a></li><li><a href="/en/guide/user-guide/cluster.html" class="sidebar-link">Register Runtime Cluster</a></li><li><a href="/en/guide/user-guide/product.html" class="sidebar-link">Maintain Product</a></li><li><a href="/en/guide/user-guide/project.html" class="sidebar-link">Maintain Project</a></li><li><a href="/en/guide/user-guide/code-repo.html" class="sidebar-link">Maintain Code Repository</a></li><li><a href="/en/guide/user-guide/environment.html" class="sidebar-link">Maintain Environment</a></li><li><a href="/en/guide/user-guide/deployment-runtime.html" aria-current="page" class="active sidebar-link">Maintain Deployment-Runtime</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/guide/user-guide/deployment-runtime.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/deployment-runtime.html#create-and-update-deployment-runtime-api" class="sidebar-link">Create and Update Deployment-Runtime (API)</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/deployment-runtime.html#delete-deployment-runtime-api" class="sidebar-link">Delete Deployment-Runtime (API)</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/deployment-runtime.html#list-deployment-runtimes-api" class="sidebar-link">List Deployment-Runtimes (API)</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/deployment-runtime.html#view-deployment-runtime-details-api" class="sidebar-link">View Deployment-Runtime Details (API)</a></li><li class="sidebar-sub-header"><a href="/en/guide/user-guide/deployment-runtime.html#force-create-update-delete-deployment-runtime-api" class="sidebar-link">Force Create/Update/Delete Deployment-Runtime (API)</a></li></ul></li><li><a href="/en/guide/user-guide/deployment-results.html" class="sidebar-link">View Deployment Results</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="maintain-deployment-runtime"><a href="#maintain-deployment-runtime" class="header-anchor">#</a> Maintain Deployment-Runtime</h1> <p>Before starting this section, please ensure that you have read the <a href="/en/guide/user-guide/main-process.html">Main Process</a> section to understand the main process and related terminology for deploying applications in Nautes.</p> <p>A deployment runtime defines the configuration declaration used to deploy projects, such as the storage location of deployment manifests and the target environment to deploy to, etc.</p> <p>Support both <a href="/en/guide/user-guide/deploy-an-application.html#prepare-runtime-environment">Command Line</a> and API for maintaining deployment runtimes.</p> <h2 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h2> <h3 id="create-access-token"><a href="#create-access-token" class="header-anchor">#</a> Create Access Token</h3> <p>You need to create an access token to use as a request header for requesting APIs. For more information, refer to <a href="/en/guide/user-guide/product.html#create-access-token">Create Access Token</a>.</p> <h3 id="import-certificates"><a href="#import-certificates" class="header-anchor">#</a> Import Certificates</h3> <p>If you want to access Nautes API Server using the HTTPS protocol, you need to <a href="/en/guide/user-guide/deploy-an-application.html#import-certificates">import certificates</a>.</p> <h3 id="create-product"><a href="#create-product" class="header-anchor">#</a> Create Product</h3> <p>Deployment runtimes belong to products, so you need to create at least one <a href="/en/guide/user-guide/product.html#create-product-api">product</a>.</p> <h3 id="create-repository"><a href="#create-repository" class="header-anchor">#</a> Create Repository</h3> <p>Deployment runtimes need to watch the Kubernetes Manifests in the repositories, so you need to create at least one repository related to the specified <a href="/en/guide/user-guide/product.html#create-product-api">product</a>.</p> <h3 id="create-environment"><a href="#create-environment" class="header-anchor">#</a> Create Environment</h3> <p>Deployment runtimes need to deploy to the runtime cluster related to the environment, so you need to create at least one environment related to the specified <a href="/en/guide/user-guide/product.html#create-product-api">product</a>.</p> <h2 id="create-and-update-deployment-runtime-api"><a href="#create-and-update-deployment-runtime-api" class="header-anchor">#</a> Create and Update Deployment-Runtime (API)</h2> <h3 id="compose-create-and-update-deployment-runtime-request"><a href="#compose-create-and-update-deployment-runtime-request" class="header-anchor">#</a> Compose Create and Update Deployment-Runtime Request</h3> <p>Compose an API request example by API definition <code>Deploymentruntime_SaveDeploymentRuntime</code> and add the access token as a request header.</p> <div class="language-Shell extra-class"><pre class="language-shell"><code>    <span class="token comment"># Replace the variable $api-server-address with the access address of the Nautes API Server.</span>
    <span class="token comment"># Replace the variable $gitlab-access-token with the GitLab access token.</span>
    <span class="token comment"># Replace the variable $product_name with the name of the product to which the deployment runtime belongs.</span>
    <span class="token comment"># Replace the variable $deploymentruntime_name with the deployment runtime name.</span>
    <span class="token function">curl</span> <span class="token parameter variable">-X</span> <span class="token string">'POST'</span> <span class="token punctuation">\</span>
    <span class="token string">'HTTP://$api-server-address/api/v1/products/$product_name/deploymentruntimes/$deploymentruntime_name'</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-H</span> <span class="token string">'accept: application/json'</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-H</span> <span class="token string">'Authorization: Bearer $gitlab-access-token'</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-d</span> <span class="token string">'{
        # The project to which the deployment runtime belongs
        &quot;projects_ref&quot;: [
            $project
        ],
        &quot;manifest_source&quot;: {
            # The source coderepo of the deployment runtime
            &quot;code_repo&quot;: $coderepo_name,
             # The revision or branch of the source coderepo 
            &quot;target_revision&quot;: $coderepo_target_revision,
             # The relative path of the source coderepo 
            &quot;path&quot;: $coderepo_path
        },
        # The target environment of the deployment runtime
        &quot;destination&quot;: $destination
    }'</span>
</code></pre></div><p>The request example after replacing the variables is shown below:</p> <div class="language-Shell extra-class"><pre class="language-shell"><code>    <span class="token function">curl</span> <span class="token parameter variable">-X</span> <span class="token string">'POST'</span> <span class="token punctuation">\</span>
    <span class="token string">'HTTP://xxx.xxx.xxx.xxx:xxxxx/api/v1/products/nautes-labs/deploymentruntimes/dr-dev'</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-H</span> <span class="token string">'accept: application/json'</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-H</span> <span class="token string">'Authorization: Bearer xxxxxxxxxxxxxxxxxxxxxxxxxx'</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">-d</span> <span class="token string">'{
        &quot;projects_ref&quot;: [
            &quot;api-server&quot;
        ],
        &quot;manifest_source&quot;: {
            &quot;code_repo&quot;: &quot;api-server&quot;,
            &quot;target_revision&quot;: &quot;HEAD&quot;,
            &quot;path&quot;: &quot;manifests/development&quot;
        },
        &quot;destination&quot;: &quot;env-dev&quot;
    }'</span>
</code></pre></div><h3 id="execute-create-and-update-deployment-runtime-request"><a href="#execute-create-and-update-deployment-runtime-request" class="header-anchor">#</a> Execute Create and Update Deployment-Runtime Request</h3> <p>Use the curl command or other tools to execute the API request to create a deployment runtime.</p> <p>After the request is successful, the resource file for the deployment runtime will be generated in the <code>default.project</code> repository of the specified product. The example of a resource file for a repository is shown below:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>    <span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> nautes.resource.nautes.io/v1alpha1
    <span class="token key atrule">kind</span><span class="token punctuation">:</span> DeploymentRuntime
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> dr<span class="token punctuation">-</span>dev
        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> nautes
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
        <span class="token key atrule">destination</span><span class="token punctuation">:</span> <span class="token string">&quot;env-dev&quot;</span>
        <span class="token key atrule">manifestSource</span><span class="token punctuation">:</span>
            <span class="token key atrule">codeRepo</span><span class="token punctuation">:</span> <span class="token string">&quot;api-server&quot;</span>
            <span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token string">&quot;manifests/development&quot;</span>
            <span class="token key atrule">targetRevision</span><span class="token punctuation">:</span> <span class="token string">&quot;HEAD&quot;</span>
        <span class="token key atrule">product</span><span class="token punctuation">:</span> <span class="token string">&quot;nautes-labs&quot;</span>
        <span class="token key atrule">projectsRef</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token string">&quot;api-server&quot;</span>
</code></pre></div><blockquote><p>If the deployment runtime is deployed to a runtime cluster, changing the destination of the deployment runtime is not supported.</p> <p>When requesting the API to update a deployment runtime, the resource file for the deployment runtime will also be updated.</p> <p>If your account is a member of the GitLab group and has write permission to the <code>main</code> branch of the <code>default.project</code> repository, you can create or update deployment runtimes.</p></blockquote> <h2 id="delete-deployment-runtime-api"><a href="#delete-deployment-runtime-api" class="header-anchor">#</a> Delete Deployment-Runtime (API)</h2> <h3 id="compose-delete-deployment-runtime-request"><a href="#compose-delete-deployment-runtime-request" class="header-anchor">#</a> Compose Delete Deployment-Runtime Request</h3> <ol><li>Compose an API request example by API definition <code>Deploymentruntime_DeleteDeploymentRuntime</code> and add the access token as a request header.</li></ol> <div class="language-Shell extra-class"><pre class="language-shell"><code>    <span class="token function">curl</span> <span class="token parameter variable">-X</span> <span class="token string">'DELETE'</span> <span class="token punctuation">\</span>
      <span class="token string">'HTTP://$api-server-address/api/v1/products/$product_name/deploymentruntimes/$deploymentruntime_name'</span> <span class="token punctuation">\</span>
      <span class="token parameter variable">-H</span> <span class="token string">'accept: application/json'</span> <span class="token punctuation">\</span>
      <span class="token parameter variable">-H</span> <span class="token string">'Authorization: Bearer $gitlab-access-token'</span>
</code></pre></div><p>The request example after replacing the variables is shown below:</p> <div class="language-Shell extra-class"><pre class="language-shell"><code>    <span class="token function">curl</span> <span class="token parameter variable">-X</span> <span class="token string">'DELETE'</span> <span class="token punctuation">\</span>
      <span class="token string">'HTTP://xxx.xxx.xxx.xxx:xxxxx/api/v1/products/nautes-labs/deploymentruntimes/dr-dev'</span> <span class="token punctuation">\</span>
      <span class="token parameter variable">-H</span> <span class="token string">'accept: application/json'</span> <span class="token punctuation">\</span>
      <span class="token parameter variable">-H</span> <span class="token string">'Authorization: Bearer xxxxxxxxxxxxxxxxxxxx'</span>
</code></pre></div><h3 id="execute-delete-deployment-runtime-request"><a href="#execute-delete-deployment-runtime-request" class="header-anchor">#</a> Execute Delete Deployment-Runtime Request</h3> <p>Use the curl command or other tools to execute the API request to delete a deployment runtime.</p> <p>After the request is successful, the resource file for the deployment runtime will be deleted in the <code>default.project</code> repository of the specified product , and the deployment runtime environment will be destroyed.</p> <blockquote><p>If your account is a member of the GitLab group and has write permission to the <code>main</code> branch of the <code>default.project</code> repository, you can delete deployment runtimes.</p></blockquote> <h2 id="list-deployment-runtimes-api"><a href="#list-deployment-runtimes-api" class="header-anchor">#</a> List Deployment-Runtimes (API)</h2> <h3 id="compose-list-deployment-runtimes-request"><a href="#compose-list-deployment-runtimes-request" class="header-anchor">#</a> Compose List Deployment-Runtimes Request</h3> <p>Compose an API request example by API definition <code>Deploymentruntime_ListDeploymentRuntimes</code> and add the access token as a request header.</p> <div class="language-Shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> <span class="token parameter variable">-X</span> <span class="token string">'GET'</span> <span class="token punctuation">\</span>
  <span class="token string">'HTTP://$api-server-address/api/v1/products/$product_name/deploymentruntimes'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'accept: application/json'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'Authorization: Bearer $gitlab-access-token'</span>
</code></pre></div><p>The request example after replacing the variables is shown below:</p> <div class="language-Shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> <span class="token parameter variable">-X</span> <span class="token string">'GET'</span> <span class="token punctuation">\</span>
  <span class="token string">'HTTP://xxx.xxx.xxx.xxx:xxxxx/api/v1/products/nautes-labs/deploymentruntimes'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'accept: application/json'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'Authorization: Bearer xxxxxxxxxxxxxxxxxxxx'</span>
</code></pre></div><h3 id="execute-list-deployment-runtimes-request"><a href="#execute-list-deployment-runtimes-request" class="header-anchor">#</a> Execute List Deployment-Runtimes Request</h3> <p>Use the curl command or other tools to execute the API request to list deployment runtimes. The response example for the deployment runtime list is shown below:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token punctuation">{</span>
    <span class="token key atrule">&quot;items&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token key atrule">&quot;product&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;nautes-labs&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;dr-dev&quot;</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;projects_ref&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;api-server&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;manifest_source&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
                <span class="token key atrule">&quot;code_repo&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;api-server&quot;</span><span class="token punctuation">,</span>
                <span class="token key atrule">&quot;target_revision&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;HEAD&quot;</span><span class="token punctuation">,</span>
                <span class="token key atrule">&quot;path&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;manifests/development&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token key atrule">&quot;destination&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;env-demo&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>If your account is a member of the GitLab group and has read permission to the <code>default.project</code> repository, you can list deployment runtimes.</p></blockquote> <h2 id="view-deployment-runtime-details-api"><a href="#view-deployment-runtime-details-api" class="header-anchor">#</a> View Deployment-Runtime Details (API)</h2> <h3 id="compose-view-deployment-runtime-details-request"><a href="#compose-view-deployment-runtime-details-request" class="header-anchor">#</a> Compose View Deployment-Runtime Details Request</h3> <p>Compose an API request example by API definition <code>Deploymentruntime_GetDeploymentRuntime</code> and add the access token as a request header.</p> <div class="language-Shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> <span class="token parameter variable">-X</span> <span class="token string">'GET'</span> <span class="token punctuation">\</span>
  <span class="token string">'HTTP://$api-server-address/api/v1/products/$product_name/deploymentruntimes/$enviroment_name'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'accept: application/json'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'Authorization: Bearer $gitlab-access-token'</span>
</code></pre></div><p>The request example after replacing the variables is shown below:</p> <div class="language-Shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> <span class="token parameter variable">-X</span> <span class="token string">'GET'</span> <span class="token punctuation">\</span>
  <span class="token string">'HTTP://xxx.xxx.xxx.xxx:xxxxx/api/v1/products/nautes-labs/deploymentruntimes/dr-dev'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'accept: application/json'</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">'Authorization: Bearer xxxxxxxxxxxxxxxxxxxx'</span>
</code></pre></div><h3 id="execute-view-deployment-runtime-details-request"><a href="#execute-view-deployment-runtime-details-request" class="header-anchor">#</a> Execute View Deployment-Runtime Details Request</h3> <p>Use the curl command or other tools to execute the API request to view the deployment runtime details. The response example for viewing the deployment runtime details is similar to that of <a href="#execute-list-deployment-runtimes-request">listing deployment runtimes</a>.</p> <blockquote><p>If your account is a member of the GitLab group and has read permission to the <code>default.project</code> repository, you can view the details of deployment runtimes.</p></blockquote> <h2 id="force-create-update-delete-deployment-runtime-api"><a href="#force-create-update-delete-deployment-runtime-api" class="header-anchor">#</a> Force Create/Update/Delete Deployment-Runtime (API)</h2> <p>For special scenarios in which API verification needs to be skipped, refer to the <a href="/en/guide/user-guide/main-process.html#prepare-runtime-environment">Prepare Runtime Environment</a> section.</p> <p>Taking creating a deployment runtime as an example, if the value of the <code>destination</code> property is set to an invalid environment whose related cluster has been destroyed, you can forcibly submit a request by adding the <code>insecure_skip_check</code> query parameter with its value set to <code>true</code> , to submit the deployment runtime resource file. The request example is shown below:</p> <div class="language-Shell extra-class"><pre class="language-shell"><code>    <span class="token function">curl</span> <span class="token parameter variable">-X</span> <span class="token string">'POST'</span> <span class="token punctuation">\</span>
      <span class="token string">'HTTP://xxx.xxx.xxx.xxx:xxxxx/api/v1/products/nautes-labs/deploymentruntimes/dr-demo?insecure_skip_check=true'</span> <span class="token punctuation">\</span>
      <span class="token parameter variable">-H</span> <span class="token string">'accept: application/json'</span> <span class="token punctuation">\</span>
      <span class="token parameter variable">-H</span> <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
      <span class="token parameter variable">-d</span> <span class="token string">'{
      &quot;projects_ref&quot;: [
        &quot;api-server&quot;
      ],
      &quot;manifest_source&quot;: {
        &quot;code_repo&quot;: &quot;api-server&quot;,
        &quot;target_revision&quot;: &quot;HEAD&quot;,
        &quot;path&quot;: &quot;manifests/development&quot;
      },
      &quot;destination&quot;: &quot;env-demo&quot;
    }'</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/en/guide/user-guide/environment.html" class="prev">
        Maintain Environment
      </a></span> <span class="next"><a href="/en/guide/user-guide/deployment-results.html">
        View Deployment Results
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a878d1f5.js" defer></script><script src="/assets/js/2.c8cb3ded.js" defer></script><script src="/assets/js/83.f9b57cc0.js" defer></script>
  </body>
</html>
